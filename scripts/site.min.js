(function(d){function g(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function l(){var d=require("util");return"Markdown.mk_block( "+d.inspect(this.toString())+", "+d.inspect(this.trailing)+", "+d.inspect(this.lineNumber)+" )"}function h(d){for(var b=0,c=-1;-1!==(c=d.indexOf("\n",c+1));)b++;return b}function k(d,b){function c(c){this.len_after=c;this.name="close_"+b}var f=d+"_state",e="strong"==d?"em_state":"strong_state";return function(m){if(this[f][0]==
b)return this[f].shift(),[m.length,new c(m.length-b.length)];var g=this[e].slice(),h=this[f].slice();this[f].unshift(b);var j=this.processInline(m.substr(b.length)),l=j[j.length-1];this[f].shift();if(l instanceof c)return j.pop(),[m.length-l.len_after,[d].concat(j)];this[e]=g;this[f]=h;return[b.length,b]}}function n(d){return r(d)&&1<d.length&&"object"===typeof d[1]&&!r(d[1])?d[1]:void 0}function q(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,
"&#39;")}function u(d){if("string"===typeof d)return q(d);var b=d.shift(),c={},f=[];for(d.length&&("object"===typeof d[0]&&!(d[0]instanceof Array))&&(c=d.shift());d.length;)f.push(arguments.callee(d.shift()));var e="",m;for(m in c)e+=" "+m+'="'+q(c[m])+'"';return"img"==b||"br"==b||"hr"==b?"<"+b+e+"/>":"<"+b+e+">"+f.join("")+"</"+b+">"}function s(d,b,c){var f;c=c||{};var e=d.slice(0);"function"===typeof c.preprocessTreeNode&&(e=c.preprocessTreeNode(e,b));var m=n(e);if(m){e[1]={};for(f in m)e[1][f]=
m[f];m=e[1]}if("string"===typeof e)return e;switch(e[0]){case "header":e[0]="h"+e[1].level;delete e[1].level;break;case "bulletlist":e[0]="ul";break;case "numberlist":e[0]="ol";break;case "listitem":e[0]="li";break;case "para":e[0]="p";break;case "markdown":e[0]="html";m&&delete m.references;break;case "code_block":e[0]="pre";f=m?2:1;var g=["code"];g.push.apply(g,e.splice(f));e[f]=g;break;case "inlinecode":e[0]="code";break;case "img":e[1].src=e[1].href;delete e[1].href;break;case "linebreak":e[0]=
"br";break;case "link":e[0]="a";break;case "link_ref":e[0]="a";if(f=b[m.ref])delete m.ref,m.href=f.href,f.title&&(m.title=f.title),delete m.original;else return m.original;break;case "img_ref":if(e[0]="img",f=b[m.ref])delete m.ref,m.src=f.href,f.title&&(m.title=f.title),delete m.original;else return m.original}f=1;if(m){for(var j in e[1])f=2;1===f&&e.splice(f,1)}for(;f<e.length;++f)e[f]=arguments.callee(e[f],b,c);return e}function v(d){for(var b=n(d)?2:1;b<d.length;)"string"===typeof d[b]?b+1<d.length&&
"string"===typeof d[b+1]?d[b]+=d.splice(b+1,1)[0]:++b:(arguments.callee(d[b]),++b)}var j=d.Markdown=function b(c){switch(typeof c){case "undefined":this.dialect=b.dialects.Gruber;break;case "object":this.dialect=c;break;default:if(c in b.dialects)this.dialect=b.dialects[c];else throw Error("Unknown Markdown dialect '"+String(c)+"'");}this.em_state=[];this.strong_state=[];this.debug_indent=""};d.parse=function(b,c){return(new j(c)).toTree(b)};d.toHTML=function(b,c,f){b=d.toHTMLTree(b,c,f);return d.renderJsonML(b)};
d.toHTMLTree=function(b,c,f){"string"===typeof b&&(b=this.parse(b,c));c=n(b);var e={};c&&c.references&&(e=c.references);b=s(b,e,f);v(b);return b};var t=j.mk_block=function(b,c,f){1==arguments.length&&(c="\n\n");var e=new String(b);e.trailing=c;e.inspect=l;e.toSource=g;void 0!=f&&(e.lineNumber=f);return e};j.prototype.split_blocks=function(b){var c=/([\s\S]+?)($|\n(?:\s*\n|$)+)/g,f=[],e,m=1;if(null!=(e=/^(\s*\n)/.exec(b)))m+=h(e[0]),c.lastIndex=e[0].length;for(;null!==(e=c.exec(b));)f.push(t(e[1],
e[2],m)),m+=h(e[0]);return f};j.prototype.processBlock=function(b,c){var f=this.dialect.block,e=f.__order__;if("__call__"in f)return f.__call__.call(this,b,c);for(var m=0;m<e.length;m++){var d=f[e[m]].call(this,b,c);if(d)return(!r(d)||0<d.length&&!r(d[0]))&&this.debug(e[m],"didn't return a proper array"),d}return[]};j.prototype.processInline=function(b){return this.dialect.inline.__call__.call(this,String(b))};j.prototype.toTree=function(b,c){var f=b instanceof Array?b:this.split_blocks(b),e=this.tree;
try{this.tree=c||this.tree||["markdown"];a:for(;f.length;){var d=this.processBlock(f.shift(),f);if(!d.length)continue a;this.tree.push.apply(this.tree,d)}return this.tree}finally{c&&(this.tree=e)}};j.prototype.debug=function(){var b=Array.prototype.slice.call(arguments);b.unshift(this.debug_indent);"undefined"!==typeof print&&print.apply(print,b);"undefined"!==typeof console&&"undefined"!==typeof console.log&&console.log.apply(null,b)};j.prototype.loop_re_over_block=function(b,c,f){var e;for(c=c.valueOf();c.length&&
null!=(e=b.exec(c));)c=c.substr(e[0].length),f.call(this,e);return c};j.dialects={};var y=function(b,c,f,e){if(c)b.push(["para"].concat(f));else{c=b[b.length-1]instanceof Array&&"para"==b[b.length-1][0]?b[b.length-1]:b;e&&1<b.length&&f.unshift(e);for(b=0;b<f.length;b++)e=f[b],"string"==typeof e&&1<c.length&&"string"==typeof c[c.length-1]?c[c.length-1]+=e:c.push(e)}},z=function(b,c,f){b=b.list;b=b[b.length-1];b[1]instanceof Array&&"para"==b[1][0]||(c+1==f.length?b.push(["para"].concat(b.splice(1))):
(c=b.pop(),b.push(["para"].concat(b.splice(1)),c)))},B=/[*+-]/,A=/^( {0,3})([*+-]|\d+\.)[ \t]+/;j.dialects.Gruber={block:{atxHeader:function(b,c){var f=b.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(f){var e=["header",{level:f[1].length}];Array.prototype.push.apply(e,this.processInline(f[2]));f[0].length<b.length&&c.unshift(t(b.substr(f[0].length),b.trailing,b.lineNumber+2));return[e]}},setextHeader:function(b,c){var f=b.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(f){var e=["header",{level:"="===f[2]?
1:2},f[1]];f[0].length<b.length&&c.unshift(t(b.substr(f[0].length),b.trailing,b.lineNumber+2));return[e]}},code:function(b,c){var f=[],e=/^(?: {0,3}\t| {4})(.*)\n?/;if(b.match(e)){a:do{var d=this.loop_re_over_block(e,b.valueOf(),function(b){f.push(b[1])});if(d.length){c.unshift(t(d,b.trailing));break a}else if(c.length){if(!c[0].match(e))break a;f.push(b.trailing.replace(/[^\n]/g,"").substring(2));b=c.shift()}else break a}while(1);return[["code_block",f.join("\n")]]}},horizRule:function(b,c){var f=
b.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(f){var e=[["hr"]];f[1]&&e.unshift.apply(e,this.processBlock(f[1],[]));f[3]&&c.unshift(t(f[3]));return e}},lists:function(b,c){function f(b){var c=B.exec(b[2])?["bulletlist"]:["numberlist"];d.push({list:c,indent:b[1]});return c}var e=b.match(A);if(e){var d=[],g=f(e),j,h=!1,l=[d[0].list],k;a:for(;;){var n=b.split(/(?=\n)/),q="",u=0;for(;u<n.length;u++){var s="",v=n[u].replace(/^\n/,function(b){s=b;return""}),e=v.match(RegExp("(?:^((?: {0,3}\\t| {4}){0,"+
d.length+"} {0,3})([*+-]|\\d+\\.)\\s+)|(^(?: {0,3}\\t| {4}){0,"+(d.length-1)+"}[ ]{0,4})"));if(void 0!==e[1]){q.length&&(y(j,h,this.processInline(q),s),h=!1,q="");e[1]=e[1].replace(/ {0,3}\t/g,"    ");var w=Math.floor(e[1].length/4)+1;if(w>d.length)g=f(e),j.push(g),j=g[1]=["listitem"];else{var r=!1;for(k=0;k<d.length;k++)if(d[k].indent==e[1]){g=d[k].list;d.splice(k+1);r=!0;break}r||(w++,w<=d.length?(d.splice(w),g=d[w-1].list):(g=f(e),j.push(g)));j=["listitem"];g.push(j)}s=""}v.length>e[0].length&&
(q+=s+v.substr(e[0].length))}q.length&&(y(j,h,this.processInline(q),s),h=!1,q="");e=d.length;h=c;k=RegExp("^((?: {0,3}\\t| {4}){"+e+"}.*?\\n?)*$");n=RegExp("^(?: {0,3}\\t| {4}){"+e+"}","gm");for(e=[];0<h.length;){k.exec(h[0])&&(h=h.shift(),k=h.replace(n,""),e.push(t(k,h.trailing,h.lineNumber)));break}0<e.length&&(x(d,z,this),j.push.apply(j,this.toTree(e,[])));e=c[0]&&c[0].valueOf()||"";if(e.match(A)||e.match(/^ /)){b=c.shift();if(e=this.dialect.block.horizRule(b,c)){l.push.apply(l,e);break}x(d,z,
this);h=!0;continue a}break}return l}},blockquote:function(b,c){if(b.match(/^>/m)){var f=[];if(">"!=b[0]){for(var e=b.split(/\n/),d=[];e.length&&">"!=e[0][0];)d.push(e.shift());b=e.join("\n");f.push.apply(f,this.processBlock(d.join("\n"),[]))}for(;c.length&&">"==c[0][0];)e=c.shift(),b=new String(b+b.trailing+e),b.trailing=e.trailing;e=b.replace(/^> ?/gm,"");f.push(this.toTree(e,["blockquote"]));return f}},referenceDefn:function(b,c){var f=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;
if(b.match(f)){n(this.tree)||this.tree.splice(1,0,{});var e=n(this.tree);void 0===e.references&&(e.references={});f=this.loop_re_over_block(f,b,function(b){b[2]&&("<"==b[2][0]&&">"==b[2][b[2].length-1])&&(b[2]=b[2].substring(1,b[2].length-1));var c=e.references[b[1].toLowerCase()]={href:b[2]};void 0!==b[4]?c.title=b[4]:void 0!==b[5]&&(c.title=b[5])});f.length&&c.unshift(t(f,b.trailing));return[]}},para:function(b){return[["para"].concat(this.processInline(b))]}}};j.dialects.Gruber.inline={__oneElement__:function(b,
c,f){var e;c=c||this.dialect.inline.__patterns__;if(c=RegExp("([\\s\\S]*?)("+(c.source||c)+")").exec(b)){if(c[1])return[c[1].length,c[1]]}else return[b.length,b];c[2]in this.dialect.inline&&(e=this.dialect.inline[c[2]].call(this,b.substr(c.index),c,f||[]));return e=e||[c[2].length,c[2]]},__call__:function(b,c){function f(b){"string"==typeof b&&"string"==typeof e[e.length-1]?e[e.length-1]+=b:e.push(b)}for(var e=[],d;0<b.length;)d=this.dialect.inline.__oneElement__.call(this,b,c,e),b=b.substr(d.shift()),
x(d,f);return e},"]":function(){},"}":function(){},"\\":function(b){return b.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/)?[2,b[1]]:[1,"\\"]},"![":function(b){var c=b.match(/^!\[(.*?)\][ \t]*\([ \t]*(\S*)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);return c?(c[2]&&("<"==c[2][0]&&">"==c[2][c[2].length-1])&&(c[2]=c[2].substring(1,c[2].length-1)),c[2]=this.dialect.inline.__call__.call(this,c[2],/\\/)[0],b={alt:c[1],href:c[2]||""},void 0!==c[4]&&(b.title=c[4]),[c[0].length,["img",b]]):(c=b.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/))?
[c[0].length,["img_ref",{alt:c[1],ref:c[2].toLowerCase(),original:c[0]}]]:[2,"!["]},"[":function(b){var c=String(b),f=j.DialectHelpers.inline_until_char.call(this,b.substr(1),"]");if(!f)return[1,"["];var e=1+f[0],f=f[1];b=b.substr(e);var d=b.match(/^\s*\([ \t]*(\S+)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(d){b=d[1];e+=d[0].length;b&&("<"==b[0]&&">"==b[b.length-1])&&(b=b.substring(1,b.length-1));if(!d[3])for(var c=1,g=0;g<b.length;g++)switch(b[g]){case "(":c++;break;case ")":0==--c&&(e-=b.length-g,b=
b.substring(0,g))}b=this.dialect.inline.__call__.call(this,b,/\\/)[0];b={href:b||""};void 0!==d[3]&&(b.title=d[3]);f=["link",b].concat(f);return[e,f]}return(d=b.match(/^\s*\[(.*?)\]/))?(e+=d[0].length,b={ref:(d[1]||String(f)).toLowerCase(),original:c.substr(0,e)},f=["link_ref",b].concat(f),[e,f]):1==f.length&&"string"==typeof f[0]?(b={ref:f[0].toLowerCase(),original:c.substr(0,e)},f=["link_ref",b,f[0]],[e,f]):[1,"["]},"<":function(b){var c;return null!=(c=b.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?
c[3]?[c[0].length,["link",{href:"mailto:"+c[3]},c[3]]]:"mailto"==c[2]?[c[0].length,["link",{href:c[1]},c[1].substr(7)]]:[c[0].length,["link",{href:c[1]},c[1]]]:[1,"<"]},"`":function(b){return(b=b.match(/(`+)(([\s\S]*?)\1)/))&&b[2]?[b[1].length+b[2].length,["inlinecode",b[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}};j.dialects.Gruber.inline["**"]=k("strong","**");j.dialects.Gruber.inline.__=k("strong","__");j.dialects.Gruber.inline["*"]=k("em","*");j.dialects.Gruber.inline._=k("em","_");
j.buildBlockOrder=function(b){var c=[],f;for(f in b)"__order__"==f||"__call__"==f||c.push(f);b.__order__=c};j.buildInlinePatterns=function(b){var c=[],f;for(f in b)if(!f.match(/^__.*__$/)){var e=f.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");c.push(1==f.length?e:"(?:"+e+")")}c=c.join("|");b.__patterns__=c;var d=b.__call__;b.__call__=function(b,e){return void 0!=e?d.call(this,b,e):d.call(this,b,c)}};j.DialectHelpers={};j.DialectHelpers.inline_until_char=function(b,c){for(var f=0,e=[];;){if(b[f]==
c)return f++,[f,e];if(f>=b.length)return null;var d=this.dialect.inline.__oneElement__.call(this,b.substr(f)),f=f+d[0];e.push.apply(e,d.slice(1))}};j.subclassDialect=function(b){function c(){}function f(){}c.prototype=b.block;f.prototype=b.inline;return{block:new c,inline:new f}};j.buildBlockOrder(j.dialects.Gruber.block);j.buildInlinePatterns(j.dialects.Gruber.inline);j.dialects.Maruku=j.subclassDialect(j.dialects.Gruber);j.dialects.Maruku.processMetaHash=function(b){var c=b.split("");b=[""];for(var f=
!1;c.length;){var e=c.shift();switch(e){case " ":f?b[b.length-1]+=e:b.push("");break;case "'":case '"':f=!f;break;case "\\":e=c.shift();default:b[b.length-1]+=e}}c={};for(f=0;f<b.length;++f)/^#/.test(b[f])?c.id=b[f].substring(1):/^\./.test(b[f])?c["class"]=c["class"]?c["class"]+b[f].replace(/./," "):b[f].substring(1):/\=/.test(b[f])&&(e=b[f].split(/\=/),c[e[0]]=e[1]);return c};j.dialects.Maruku.block.document_meta=function(b){if(!(1<b.lineNumber)&&b.match(/^(?:\w+:.*\n)*\w+:.*$/)){n(this.tree)||this.tree.splice(1,
0,{});b=b.split(/\n/);for(p in b){var c=b[p].match(/(\w+):\s*(.*)$/),f=c[1].toLowerCase();this.tree[1][f]=c[2]}return[]}};j.dialects.Maruku.block.block_meta=function(b){var c=b.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(c){var f=this.dialect.processMetaHash(c[2]);if(""===c[1]){c=this.tree[this.tree.length-1];b=n(c);if("string"===typeof c)return;b||(b={},c.splice(1,0,b));for(a in f)b[a]=f[a];return[]}b=b.replace(/\n.*$/,"");c=this.processBlock(b,[]);b=n(c[0]);b||(b={},c[0].splice(1,0,b));
for(a in f)b[a]=f[a];return c}};j.dialects.Maruku.block.definition_list=function(b,c){var f=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,e=["dl"],d;if(b.match(f)){for(var g=[b];c.length&&f.exec(c[0]);)g.push(c.shift());for(var h=0;h<g.length;++h){d=g[h].match(f);var j=d[1].replace(/\n$/,"").split(/\n/),l=d[2].split(/\n:\s+/);for(d=0;d<j.length;++d)e.push(["dt",j[d]]);for(d=0;d<l.length;++d)e.push(["dd"].concat(this.processInline(l[d].replace(/(\n)\s+/,"$1"))))}return[e]}};j.dialects.Maruku.inline["{:"]=function(b,
c,f){if(!f.length)return[2,"{:"];c=f[f.length-1];if("string"===typeof c)return[2,"{:"];b=b.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!b)return[2,"{:"];f=this.dialect.processMetaHash(b[1]);var e=n(c);e||(e={},c.splice(1,0,e));for(var d in f)e[d]=f[d];return[b[0].length,""]};j.buildBlockOrder(j.dialects.Maruku.block);j.buildInlinePatterns(j.dialects.Maruku.inline);var r=Array.isArray||function(b){return"[object Array]"==Object.prototype.toString.call(b)},x;x=Array.prototype.forEach?function(b,c,f){return b.forEach(c,
f)}:function(b,c,f){for(var e=0;e<b.length;e++)c.call(f||b,b[e],e,b)};d.renderJsonML=function(b,c){c=c||{};c.root=c.root||!1;var f=[];if(c.root)f.push(u(b));else{b.shift();for(b.length&&("object"===typeof b[0]&&!(b[0]instanceof Array))&&b.shift();b.length;)f.push(u(b.shift()))}return f.join("\n\n")}})(function(){return"undefined"===typeof exports?(window.markdown={},window.markdown):exports}());var addemails,convertgist,convertimg,find,load,markup,posts,replaceall,routing,sanitize,show,time_zones,vglize;posts=[];time_zones={"-1000":["HAST",!1],"-0900":["AKST","HADT"],"-0800":["PST","AKDT"],"-0700":["MST","PDT"],"-0600":["CST","MDT"],"-0500":["EST","CDT"],"-0400":["AST","EDT"],"-0330":["NST",!1],"-0300":[!1,"ADT"],"-0230":[!1,"NDT"]};moment.meridiem=function(d){return["a.m.","p.m."][Math.floor(d/12)]};
convertimg=function(d){var g,l,h,k;d=$(d);k=d.attr("src");g=k.match(/\/w([0-9]+)-h([0-9]+)-/);if(null!=g)return console.dir(g),h=g[2]/g[1],console.log(h),l=$(document.createElement("div")),l.css({width:"100%",backgroundImage:"url("+k+")",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%"}),d.replaceWith(l),$(window).resize(function(){return l.css("height",""+l.width()*h+"px")}),$(window).trigger("resize")};
convertgist=function(d){var g,l;d=$(d);g=d.attr("alt");l=d.attr("src").match(/^gist\:([0-9a-z]+)$/i);if(null!=l)return load("https://api.github.com/gists/"+l[1],"jsonp",function(h){var k;if(null!=h.data.files)return k=$(document.createElement("pre")),h=sanitize(h.data.files[g].content),/\.rpf$/.test(g)&&(h=vglize(h)),k.html(h),d.parent().replaceWith(k);d.parent().css("margin-left","2rem");return d.replaceWith('<code>&raquo;&nbsp;</code><a href="https://gist.github.com/'+l[1]+"#file-"+g.replace(/\./g,
"-")+'"><code>'+g+"</code></a>")})};sanitize=function(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};replaceall=function(d,g){var l,h,k;h=0;for(k=g.length;h<k;h++)l=g[h],d=d.replace(l[0],l[1]);return d};vglize=function(d){return replaceall(" "+d+" ",[[/(\W)([A-Z_]+)(\W)/g,'$1<span class="vgl-keyword">$2</span>$3'],[/^\s/,""],[/\s$/,""]])};markup=markdown.toHTML;load=function(d,g,l){return $.ajax({url:d,dataType:g,error:function(){return console.dir(arguments)},success:function(d){return l(d)}})};
find=function(d){return _.find(posts,function(g){return g.slug===d})};
show=function(d){var g,l,h,k,n;if(d.html)return console.dir("using cached html for "+d.slug),l=$("#post"),l.empty(),h=d.moment.format("MMMM D, YYYY"),k=d.moment.format("h:mm a"),(n=time_zones[d.moment.format("ZZ")][d.moment.isDST()?1:0])||(n=d.moment.format("ZZ")),g=$(document.createElement("article")),g.append("<header><h1>"+d.title+"</h1><h2>"+h+" @ "+k+" "+n+"</h2></header>"),g.append("<section>"+d.html+"</section>"),$("section > h1",g).first().remove(),l.append(g),$('img[src$="#stretch-me"]',
l).each(function(){return convertimg(this)}),$('img[src^="gist:"]',l).each(function(){return convertgist(this)}),addemails(l);console.dir("loading posts/"+d.file);return load("posts/"+d.file,"text",function(g){var h;h=_.indexOf(posts,d);posts[h].html=/\.md$/.test(d.file)?markup(g):g;console.dir("markdown -> html saved in cache");return show(posts[h])})};
routing=function(d){return new Davis(function(){var g,l,h,k,n;this.configure(function(d){d.generateRequestOnPageLoad=!0;return d.handleRouteNotFound=!0});this.bind("routeNotFound",function(d){return d.redirect("/")});k=d.routes;n=[];l=0;for(h=k.length;l<h;l++)g=k[l],n.push(this.get(g.pattern,d.fn[g.fn]));return n})};addemails=function(d){null==d&&$("body");return $('a[href="#email"]').attr("href","mailto:me+website@iancooper.name")};
$(function(){addemails();$("nav > header > h1").css("cursor","pointer").click(function(d){d.preventDefault();return self.location.href="http://iancooper.name/"});return load("posts/index.json","json",function(d){var g,l,h,k,n;posts=[];n=d.posts;d=0;for(k=n.length;d<k;d++)h=n[d],h.moment=moment(h.date,"YYYY-MM-DDTHH:mmZZ"),h.date=h.moment.format("D MMM YYYY"),h.dateValue=h.moment.valueOf(),h.html=null,posts.push(h);posts.sort(function(d,g){return g.dateValue-d.dateValue});d=$("#posts").attr("data-max-recent");
d=posts.length>d?d:posts.length;l=moment();for(g=k=0;0<=d?k<d:k>d;g=0<=d?++k:--k)"published"===posts[g].status&&l>=posts[g].moment?$("#posts").append('<li><a href="'+posts[g].slug+'">'+posts[g].title+' <span class="date">'+posts[g].date+"</span></a></li>"):g--;return routing({fn:{latest:function(d){var h,k,n;l=moment();n=[];g=h=0;for(k=posts.length;0<=k?h<=k:h>=k;g=0<=k?++h:--h)if("published"===posts[g].status&&l>=posts[g].moment){d.redirect("/"+posts[g].slug);break}else n.push(void 0);return n},
selected:function(d){h=find(d.params.post);return null!=h?show(h):d.redirect("/latest")}},routes:[{pattern:"/",fn:"latest"},{pattern:"/latest",fn:"latest"},{pattern:"latest",fn:"latest"},{pattern:"/:post",fn:"selected"},{pattern:":post",fn:"selected"}]})})});
